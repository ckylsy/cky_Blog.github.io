<!DOCTYPE html>
<html>
  <!-- Html Head Tag-->
  <head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="">
  <meta name="author" content="John Doe">
  <!-- Open Graph Data -->
  <meta property="og:title" content="做题中遇到的漏洞积累"/>
  <meta property="og:description" content="" />
  <meta property="og:site_name" content="Hexo"/>
  <meta property="og:type" content="article" />
  <meta property="og:image" content="http://example.com"/>
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  

  <!-- Site Title -->
  <title>Hexo</title>

  <!-- Bootstrap CSS -->
  
<link rel="stylesheet" href="/css/bootstrap.min.css">

  <!-- Custom CSS -->
  
  
<link rel="stylesheet" href="/css/style.light.css">


  <!-- Google Analytics -->
  

<meta name="generator" content="Hexo 5.2.0"></head>

  <body>
    <!-- Page Header -->


<header class="site-header header-background" style="background-image: url(/img/default-banner-dark.jpg)">
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <div class="page-title with-background-image">
          <p class="title">做题中遇到的漏洞积累</p>
          <p class="subtitle"></p>
        </div>
        <div class="site-menu with-background-image">
          <ul>
            
              <li>
                <a href="/">
                  
                  Home
                  
                </a>
              </li>
            
              <li>
                <a href="/archives">
                  
                  Archives
                  
                </a>
              </li>
            
              <li>
                <a href="https://github.com/<your-github-username>">
                  
                  Github
                  
                </a>
              </li>
            
              <li>
                <a href="mailto:<your-email-address>">
                  
                  Email
                  
                </a>
              </li>
            
          </ul>
        </div>
      </div>
    </div>
  </div>
</header>

<article>
  <div class="container typo">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <div class="post-info text-muted">
          
            <!-- Author -->
            <span class="author info">By John Doe</span>
          
          <!-- Date -->
          <span class="date-time info">On
            <span class="date">2020-11-21</span>
            <span class="time">21:20:55</span>
          </span>
          
        </div>
        <!-- Tags -->
        
        <!-- Post Main Content -->
        <div class="post-content">
          <p>#前言<br>用这个来记录做题时所遇到的漏洞吧。</p>
<a id="more"></a>
<p><em>命令执行漏洞</em></p><br>
命令执行漏洞是指服务器没有对执行的命令进行过滤，用户可以随意执行系统命令，命令执行漏洞属于高危漏洞之一。<br>
如php的命令执行漏洞主要是基于一些函数的参数过滤不足导致的，可以执行命令的函数有system，exec，shell-exec，passthru，pcntl-execl，popen，proc-open等。<br>
漏洞的原理<br>
在操作系统中， & 、&& 、| 、 || 都可以作为命令连接符使用，用户通过浏览器提交执行命令，由于服务器端没有针对执行函数做过滤，导致在没有指定绝对路径的情况下就执行命令<br>
<em>注解</em><br>
A&&B   先执行A，执行成功后执行B，否则不执行B<br>
A|B    只执行B<br>
A&B    先执行A，不管是否成功，都会执行B<br>
A;B    先执行A，再执行B<br>
A&B    简单拼接，A B之间无制约关系<br>
但是有时做题会出现过滤现象，要一个一个试试，然后%0A也可以实现拼接<br>
<p><em>包含日志文件getshell</em></p><br>
<h1>包含日志文件漏洞利用概述</h1>
当我们没有上传点，并且也没有url_allow_include功能时，我们就可以考虑包含服务器的日志文件。利用思路也比较简单，当我们访问网站时，服务器的日志都会记录我们的行为，当我们访问链接中包含php一句话木马时，也会被记录到日志中去，这时候我们如果知道服务器的日志文职，我们可以去包含这个文件从而拿到shell（shell是一个用c语言编写的程序，它是用户使用linux的桥梁。这个应用程序提供了一个界面，用户通过这个姐买你访问操作系统的系统内核服务）。其实整个"包含日志文件漏洞利用"最关键的就是找到日志存放的"物理路径",只要找到日志的物理存放路径，一切就可以按部就班的完成利用了。
<h1>漏洞利用条件</h1>
<ul>
<li>日志的物理存放路径</li>
<li>存在文件包含漏洞</li>
</ul>
<h1>获得日志存放路径</h1>
<ol>
<li>apache+linux日志默认·存放路径<br>
/etc/httpd/logs/access_log<br>
/var/log/httpd/access_log</li>
<li>apache+win2003默认路径<br>
D:\xampp\apache\logs\access.log<br>
D：\xampp\apache\logs\eror.log<br>
<li>iis6.0+win2003 默认日志文件<br>
C：\WINDOWS\system32\Logfiles
<li>iis6.0+win2003默认文件<br>
  %SystemDrive%\inetpub\logs\LogFiles<br>
<li>nginx日志文件<br>
日志文件在用户安装目录logs目录下<br>
若安装路径为/usr/local/nginx<br>
则日志目录就是在/usr/local/nginx/logs里





        </div>
      </div>
    </div>
  </div>
</article>



    <!-- Footer -->
<footer>
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <p class="copyright text-muted">
          Theme By <a target="_blank" href="https://github.com/levblanc">Levblanc.</a>
          Inspired By <a target="_blank" href="https://github.com/klugjo/hexo-theme-clean-blog">Clean Blog.</a>
        <p class="copyright text-muted">
          Powered By <a target="_blank" href="https://hexo.io/">Hexo.</a>
        </p>
      </div>
    </div>
  </div>
</footer>


    <!-- After Footer Scripts -->

<script src="/js/highlight.pack.js"></script>

<script>
  document.addEventListener("DOMContentLoaded", function(event) {
    var codeBlocks = Array.prototype.slice.call(document.getElementsByTagName('pre'))
    codeBlocks.forEach(function(block, index) {
      hljs.highlightBlock(block);
    });
  });
</script>

  </body>
</html>

